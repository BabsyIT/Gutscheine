<!doctype html> 

<html lang="de"> 

 <head> 

  <meta charset="UTF-8"> 

  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Babsy Countdown</title> 

  <script src="/_sdk/element_sdk.js"></script> 

  <style> 

    body { 

      box-sizing: border-box; 

      margin: 0; 

      padding: 0; 

      height: 100%; 

      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 

      display: flex; 

      align-items: center; 

      justify-content: center; 

      overflow: hidden; 

    } 

 

    html { 

      height: 100%; 

    } 

 

    .container { 

      width: 100%; 

      height: 100%; 

      display: flex; 

      flex-direction: column; 

      align-items: center; 

      justify-content: center; 

      padding: 40px; 

      position: relative; 

    } 

 

    .title { 

      font-size: 32px; 

      font-weight: 800; 

      margin-bottom: 60px; 

      text-align: center; 

      letter-spacing: -0.5px; 

    } 

 

    .timer-circle { 

      position: relative; 

      width: 280px; 

      height: 280px; 

      margin-bottom: 60px; 

    } 

 

    .circle-bg { 

      position: absolute; 

      top: 0; 

      left: 0; 

      width: 100%; 

      height: 100%; 

      border-radius: 50%; 

      opacity: 0.8; 

      background-color: rgb(167, 26, 128); 

    } 

 

    .timer-display { 

      position: absolute; 

      top: 50%; 

      left: 50%; 

      transform: translate(-50%, -50%); 

      font-size: 120px; 

      font-weight: 900; 

      letter-spacing: -2px; 

      text-align: center; 

    } 

 

    .controls { 

      display: flex; 

      gap: 16px; 

      flex-wrap: wrap; 

      justify-content: center; 

    } 

 

    .btn { 

      padding: 16px 32px; 

      font-size: 18px; 

      font-weight: 700; 

      border: none; 

      border-radius: 50px; 

      cursor: pointer; 

      transition: all 0.3s ease; 

      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); 

    } 

 

    .btn:hover { 

      transform: translateY(-2px); 

      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2); 

    } 

 

    .btn:active { 

      transform: translateY(0); 

    } 

 

    .btn-primary { 

      min-width: 140px; 

    } 

 

    .btn-secondary { 

      min-width: 140px; 

      opacity: 0.9; 

    } 

 

    .btn-secondary:hover { 

      opacity: 1; 

    } 

 

    @keyframes pulse { 

      0%, 100% { 

        transform: translate(-50%, -50%) scale(1); 

        opacity: 0.8; 

      } 

      50% { 

        transform: translate(-50%, -50%) scale(1.1); 

        opacity: 1; 

      } 

    } 

 

    .pulse { 

      animation: pulse 1s ease-in-out infinite; 

    } 

 

    @keyframes ripple { 

      0% { 

        transform: translate(-50%, -50%) scale(1); 

        opacity: 0.6; 

      } 

      100% { 

        transform: translate(-50%, -50%) scale(1.4); 

        opacity: 0; 

      } 

    } 

 

    .ripple { 

      position: absolute; 

      top: 50%; 

      left: 50%; 

      width: 100%; 

      height: 100%; 

      border-radius: 50%; 

      border: 3px solid; 

      animation: ripple 1.5s ease-out infinite; 

    } 

 

    .loading-message { 

      position: fixed; 

      bottom: 40px; 

      left: 50%; 

      transform: translateX(-50%); 

      padding: 16px 32px; 

      border-radius: 12px; 

      font-weight: 600; 

      font-size: 16px; 

      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2); 

      opacity: 0; 

      transition: opacity 0.3s ease; 

      z-index: 1000; 

    } 

 

    .loading-message.show { 

      opacity: 1; 

    } 

 

    .auto-start-info { 

      position: absolute; 

      bottom: 20px; 

      left: 50%; 

      transform: translateX(-50%); 

      font-size: 14px; 

      opacity: 0.7; 

      text-align: center; 

    } 

 

    @media (max-width: 640px) { 

      .title { 

        font-size: 24px; 

        margin-bottom: 40px; 

      } 

 

      .timer-circle { 

        width: 220px; 

        height: 220px; 

        margin-bottom: 40px; 

      } 

 

      .timer-display { 

        font-size: 80px; 

      } 

 

      .btn { 

        padding: 14px 28px; 

        font-size: 16px; 

      } 

    } 

  </style> 

  <style>@view-transition { navigation: auto; }</style> 

  <script src="/_sdk/data_sdk.js" type="text/javascript"></script> 

  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script> 

 </head> 

 <body> 

  <div class="container"> 

   <h1 class="title" id="title">Babsy Countdown</h1> 

   <div class="timer-circle"> 

    <div class="circle-bg" id="circleBg"></div> 

    <div class="ripple" id="ripple"></div> 

    <div class="timer-display" id="timerDisplay"> 

     3 

    </div> 

   </div> 

   <div class="controls"><button class="btn btn-primary" id="startBtn">Start</button> <button class="btn btn-secondary" id="skipBtn">Direkt zu Gutscheinen</button> 

   </div> 

   <div class="auto-start-info" id="autoStartInfo"> 

    Countdown startet automatisch in 2 Sekunden... 

   </div> 

  </div> 

  <div class="loading-message" id="loadingMessage"> 

   Weiterleitung zu den Gutscheinen... 

  </div> 

  <script> 

    const defaultConfig = { 

      background_gradient_start: "#89cdd3", 

      background_gradient_end: "#89cdd3", 

      timer_text_color: "#FFFFFF", 

      circle_color: "rgb(167, 26, 128)", 

      primary_button_bg: "#FFFFFF", 

      primary_button_text: "rgb(167, 26, 128)", 

      secondary_button_bg: "#0E7490", 

      secondary_button_text: "#FFFFFF", 

      loading_message_bg: "#67E8F9", 

      loading_message_text: "#FFFFFF", 

      ripple_color: "#FFFFFF", 

      font_family: "Inter", 

      font_size: 16, 

      timer_title: "Babsy Countdown", 

      redirect_url: "https://babsygutscheine.my.canva.site/", 

      countdown_seconds: "3" 

    }; 

 

    let totalSeconds = 3; 

    let remainingSeconds = totalSeconds; 

    let timerInterval = null; 

    let isRunning = false; 

    let autoStartTimeout = null; 

 

    const timerDisplay = document.getElementById('timerDisplay'); 

    const startBtn = document.getElementById('startBtn'); 

    const skipBtn = document.getElementById('skipBtn'); 

    const ripple = document.getElementById('ripple'); 

    const loadingMessage = document.getElementById('loadingMessage'); 

    const title = document.getElementById('title'); 

    const autoStartInfo = document.getElementById('autoStartInfo'); 

 

    function updateDisplay() { 

      timerDisplay.textContent = remainingSeconds; 

    } 

 

    function startTimer() { 

      if (isRunning) return; 

 

      isRunning = true; 

      startBtn.textContent = "LÃ¤uft..."; 

      startBtn.disabled = true; 

      ripple.style.display = 'block'; 

      timerDisplay.classList.add('pulse'); 

      autoStartInfo.style.display = 'none'; 

 

      if (autoStartTimeout) { 

        clearTimeout(autoStartTimeout); 

      } 

 

      timerInterval = setInterval(() => { 

        remainingSeconds--; 

        updateDisplay(); 

 

        if (remainingSeconds <= 0) { 

          completeTimer(); 

        } 

      }, 1000); 

    } 

 

    function completeTimer() { 

      isRunning = false; 

      clearInterval(timerInterval); 

      remainingSeconds = 0; 

      updateDisplay(); 

      ripple.style.display = 'none'; 

      timerDisplay.classList.remove('pulse'); 

       

      showLoadingMessage(); 

      redirectToGutscheine(); 

    } 

 

    function showLoadingMessage() { 

      loadingMessage.classList.add('show'); 

    } 

 

    function redirectToGutscheine() { 

      const redirectUrl = window.elementSdk?.config?.redirect_url || defaultConfig.redirect_url; 

      setTimeout(() => { 

        window.open(redirectUrl, '_blank', 'noopener,noreferrer'); 

      }, 1500); 

    } 

 

    function skipToGutscheine() { 

      if (autoStartTimeout) { 

        clearTimeout(autoStartTimeout); 

      } 

      if (timerInterval) { 

        clearInterval(timerInterval); 

      } 

      showLoadingMessage(); 

      redirectToGutscheine(); 

    } 

 

    // Auto-start nach 2 Sekunden 

    function initAutoStart() { 

      autoStartTimeout = setTimeout(() => { 

        if (!isRunning) { 

          startTimer(); 

        } 

      }, 2000); 

    } 

 

    startBtn.addEventListener('click', startTimer); 

    skipBtn.addEventListener('click', skipToGutscheine); 

 

    async function onConfigChange(config) { 

      const customFont = config.font_family || defaultConfig.font_family; 

      const baseFontStack = '-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'; 

      const baseSize = config.font_size || defaultConfig.font_size; 

 

      // Update countdown seconds 

      const newSeconds = parseInt(config.countdown_seconds || defaultConfig.countdown_seconds); 

      if (newSeconds > 0 && newSeconds !== totalSeconds) { 

        totalSeconds = newSeconds; 

        if (!isRunning) { 

          remainingSeconds = totalSeconds; 

          updateDisplay(); 

        } 

      } 

 

      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`; 

      document.body.style.background = `linear-gradient(135deg, ${config.background_gradient_start || defaultConfig.background_gradient_start}, ${config.background_gradient_end || defaultConfig.background_gradient_end})`; 

 

      title.textContent = config.timer_title || defaultConfig.timer_title; 

      title.style.color = config.timer_text_color || defaultConfig.timer_text_color; 

      title.style.fontSize = `${baseSize * 2}px`; 

 

      timerDisplay.style.color = config.timer_text_color || defaultConfig.timer_text_color; 

      timerDisplay.style.fontSize = `${baseSize * 7.5}px`; 

 

      const circleBg = document.getElementById('circleBg'); 

      circleBg.style.backgroundColor = config.circle_color || defaultConfig.circle_color; 

 

      ripple.style.borderColor = config.ripple_color || defaultConfig.ripple_color; 

 

      startBtn.style.backgroundColor = config.primary_button_bg || defaultConfig.primary_button_bg; 

      startBtn.style.color = config.primary_button_text || defaultConfig.primary_button_text; 

      startBtn.style.fontSize = `${baseSize * 1.125}px`; 

 

      skipBtn.style.backgroundColor = config.secondary_button_bg || defaultConfig.secondary_button_bg; 

      skipBtn.style.color = config.secondary_button_text || defaultConfig.secondary_button_text; 

      skipBtn.style.fontSize = `${baseSize * 1.125}px`; 

 

      loadingMessage.style.backgroundColor = config.loading_message_bg || defaultConfig.loading_message_bg; 

      loadingMessage.style.color = config.loading_message_text || defaultConfig.loading_message_text; 

      loadingMessage.style.fontSize = `${baseSize}px`; 

 

      autoStartInfo.style.color = config.timer_text_color || defaultConfig.timer_text_color; 

      autoStartInfo.style.fontSize = `${baseSize * 0.875}px`; 

    } 

 

    if (window.elementSdk) { 

      window.elementSdk.init({ 

        defaultConfig, 

        onConfigChange, 

        mapToCapabilities: (config) => ({ 

          recolorables: [ 

            { 

              get: () => config.background_gradient_start || defaultConfig.background_gradient_start, 

              set: (value) => { 

                config.background_gradient_start = value; 

                window.elementSdk.setConfig({ background_gradient_start: value }); 

              } 

            }, 

            { 

              get: () => config.background_gradient_end || defaultConfig.background_gradient_end, 

              set: (value) => { 

                config.background_gradient_end = value; 

                window.elementSdk.setConfig({ background_gradient_end: value }); 

              } 

            }, 

            { 

              get: () => config.timer_text_color || defaultConfig.timer_text_color, 

              set: (value) => { 

                config.timer_text_color = value; 

                window.elementSdk.setConfig({ timer_text_color: value }); 

              } 

            }, 

            { 

              get: () => config.primary_button_bg || defaultConfig.primary_button_bg, 

              set: (value) => { 

                config.primary_button_bg = value; 

                window.elementSdk.setConfig({ primary_button_bg: value }); 

              } 

            }, 

            { 

              get: () => config.secondary_button_bg || defaultConfig.secondary_button_bg, 

              set: (value) => { 

                config.secondary_button_bg = value; 

                window.elementSdk.setConfig({ secondary_button_bg: value }); 

              } 

            } 

          ], 

          borderables: [], 

          fontEditable: { 

            get: () => config.font_family || defaultConfig.font_family, 

            set: (value) => { 

              config.font_family = value; 

              window.elementSdk.setConfig({ font_family: value }); 

            } 

          }, 

          fontSizeable: { 

            get: () => config.font_size || defaultConfig.font_size, 

            set: (value) => { 

              config.font_size = value; 

              window.elementSdk.setConfig({ font_size: value }); 

            } 

          } 

        }), 

        mapToEditPanelValues: (config) => new Map([ 

          ["timer_title", config.timer_title || defaultConfig.timer_title], 

          ["redirect_url", config.redirect_url || defaultConfig.redirect_url], 

          ["countdown_seconds", config.countdown_seconds || defaultConfig.countdown_seconds] 

        ]) 

      }); 

 

      onConfigChange(window.elementSdk.config); 

    } else { 

      onConfigChange(defaultConfig); 

    } 

 

    // Starte Auto-Start Timer beim Laden der Seite 

    window.addEventListener('load', initAutoStart); 

  </script> 

 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'997c78bde208b571',t:'MTc2MjAxMTQyNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body> 

</html> 
